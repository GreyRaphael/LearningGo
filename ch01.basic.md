# Basic

- [Basic](#basic)
	- [array \& slice](#array--slice)
	- [function](#function)
		- [Function Types Are a Bridge to Interfaces](#function-types-are-a-bridge-to-interfaces)

## array & slice

what is slice?

```go
// in 64bit architecture, slice size is 24 bytes
type slice struct {
	array unsafe.Pointer
	len   int
	cap   int
}
```

```go
func main() {
	arr := [10]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
	sl := arr[3:7:9]                                   // [4, 5, 6, 7]
	fmt.Println(sl, len(sl), cap(sl))                  // [4 5 6 7] 4 6
	fmt.Printf("slice size: %d\n", unsafe.Sizeof(sl))  // slice size: 24 = 8*3
	fmt.Printf("array size: %d\n", unsafe.Sizeof(arr)) // array size: 80 = 8*10
}
```

## function

### Function Types Are a Bridge to Interfaces

*function type* just likes other *basic types*(int, float64, bool, ...)
> 函数类型为`func(int, float64)`的变量(`greeting`)显示转换为`HandlerFunc`类型，并赋予其新的方法`Do`

```go
type Handler interface {
	Do(int, float64)
}

// HandlerFunc is a function type which meets the Handler interface
type HandlerFunc func(int, float64)

// function type has a method: Do
func (f HandlerFunc) Do(x int, y float64) {
	f(x, y)
}

// function to use
func Serve(x int, y float64, handler Handler) {
	handler.Do(x, y)
}

func greeting(x int, y float64) {
	fmt.Printf("greeting %d and %f\n", x, y)
}

func main() {
	// Serve(1, 2.0, greeting) // greeting not meet the Handler interface
	func1 := HandlerFunc(greeting) // explicitly convert to HandlerFunc
	func1.Do(10, 20.1) // greeting 10 and 20.100000
	Serve(1, 2.0, HandlerFunc(greeting)) // greeting 1 and 2.000000
}
```