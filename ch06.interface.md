# interface

- [interface](#interface)

> ***Accept Interfaces, Return Structs***

good example: *Accept Interfaces*

```go
package main

import (
	"fmt"
	"math"
)

type rect struct {
	width, height float64
}
type circle struct {
	radius float64
}

func (r rect) area() float64 {
	return r.width * r.height
}
func (r rect) perim() float64 {
	return 2*r.width + 2*r.height
}

func (c circle) area() float64 {
	return math.Pi * c.radius * c.radius
}
func (c circle) perim() float64 {
	return 2 * math.Pi * c.radius
}

type geometry interface {
	area() float64
	perim() float64
}

// accept an interface as argument
func measure(g geometry) {
	fmt.Println(g)
	fmt.Println(g.area())
	fmt.Println(g.perim())
}

func main() {
	r := rect{width: 3, height: 4}
	c := circle{radius: 5}

	measure(r)
	measure(c)
}
```

bad example: *return interface*

**why we should avoid returning interface:**
1. **Lack of clarity**: Returning an interface makes it unclear to the caller of the function what concrete type is actually being returned. This can lead to confusion and make the code harder to understand.

1. **Implicit coupling**: When a function returns an interface, the caller may be forced to depend on specific methods defined by that interface, creating implicit dependencies and making the code less flexible.

1. **Reduced control and predictability**: Returning interfaces can make it harder to reason about the behavior of the returned value, as the specific methods available on the concrete type are not immediately visible to the caller.

1. **Performance considerations**: Using interfaces as return types might result in unnecessary heap allocations and indirections, potentially impacting performance, especially in performance-critical code.

bad example1: **Lack of clarity**

```go
package main

import "fmt"

type Shape interface {
	Area() float64
}

type Circle struct {
	Radius float64
}

func (c Circle) Area() float64 {
	return 3.14 * c.Radius * c.Radius
}

func NewShape() Shape {
	return Circle{Radius: 10} // Unclear which concrete type is being returned
}

func main() {
	shape := NewShape()
	fmt.Printf("%T\n", shape) // Output: main.Circle
	fmt.Println(shape.Area())
}
```